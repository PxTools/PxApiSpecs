[comment]: <> (Run this command in a bash promt to updated the specs.md file)
[comment]: <> (./include_refs.sh specs_template.md > specs.md)

# PxApi 2.0
# Readers guide
## What this instruction covers
This document specifies the  queries and response formats and also the endpoints for the PxApi 2.0.
## References

[https://www.dst.dk/en/Statistik/statistikbanken/api](https://www.dst.dk/en/Statistik/statistikbanken/api)

[http://api.statbank.dk/console#data](http://api.statbank.dk/console#data)

[https://www.vinaysahni.com/best-practices-for-a-pragmatic-restful-api](https://www.vinaysahni.com/best-practices-for-a-pragmatic-restful-api)

# Concepts
The PxAPI uses some abstractions to represent the different parts of the statistical database. This section aims to give the reader a better understanding of those abstractions laying a foundation for understanding the structure of the API and the data that it provides.
## Table
A table is the representation of a statistical table. Others may sometimes refer to the same concept a dataset, cube, or multi-dimensional cube. But we have chose to call it a table due to historical reasons. A table consists of two parts the data that contains the numbers and the metadata that gives the data a context/meaning. E.g. data 10 452 326 and the metadata the population of Sweden December 31 2021.
## Database
A database is a collection of tables that are organized and structured together according to some schema. 
A common mistake is to mix the database concept with a relational database management system like Oracle Database or Microsoft SQL Server. 
Also sometimes when referring to the database one might refer to the instance of the database.
## Folder
Folders are used to organize tables in a database. A folder can contain other folders or tables. 
Usually, the first level of folders in a database are referred to the subject areas of the database. Others might also call them the themes of the database.
## Variable
Tables are multidimensional and variables are the concept used to describe the data (others may refer to variables as dimensions).  Take the example data 10 452 326 and the metadata the population of Sweden December 31 2021. 10 452 326 is described by tree variables 
1. What we are measuring, in our case this is the population. This variable is special and is referred to as the content variable. There and only be one content variable. Sometimes when there is just one content the content variable may be omitted instead the context is given by other metadata for the table. 
2. The point in time that the number is associated to in our case 31 December 2021. This variable type is also special and is referred to as the time variable. There should always be one and only one time variable.
3. The region. In our case it is Sweden. This is also a special kind of variable called a geographical variable. A table might have zero or many geographical variables but usually only have one if they have any.
There is a fourth kind of variable that is just called a variable that is used to describe the data. Imagen, that we had divided 10 452 326 by gender so we have two data cells instead 5 260 707 and 5 191 619 one for male and one for female. Then that fourth variable would be gender.
## Value
Variables have distinct values that make up the space for it. E.g. our gender variable above have two values one for male and one for female.
## Code list
A variable might have code list associated to that defined a new space for the variable by providing different sets of values. E.g. imagine, you have a regional variable with values for each municipality in Sweden. Then you might have a code list that transforms the municipalities into counties.
## Data cell
A data cell is the individual measure in a table.
The total number of cells for a table is given by the product of the number of values for each variable.
## Data source type
The information might be stored in different formats and technologies. We currently support two different data source types PX-file based and Oracle databases and Microsoft SQL Server that uses the Common Nordic Meta Model.
## Other terminology
- *Paxiom* the object model representing a table.
- *CNMM* the Common Nordic Meta Model is a relational database model for representing a `database` and `tables`. It is used and maintained by Statistics Sweden, Norway and Denmark.
- *PX-file* a physical representation of a table by using the PX file format.
- *PX-file database* a collection of PX-files that represents a `database`.
# API endpoints

POST is primarily intended to be used when fetching data since the query to select the data can in some cases become very large. I some cases the url can exceed the maximum number of characteras allowed for a url. In these cases a POST request could be the solution.

Proposal: Look at Json-Stat collections 

TODO Throttle protection

## Configuration endpoint
Get API configuration settings. Instances of the API could be configured diffrently from each other. Clients can then use this endpoint to get information that could be useful for strering the behaivour for the client.
```
HTTP GET https://my-site.com/api/v2/config
```
### Example response
```json
{
    "apiVersion": "2.0",
    "languages": [
        {
            "id": "sv",
            "lable": "Svenska"
        },
        {
            "id": "en",
            "lable": "English"
        }
    ],
    "defaultLanguage": "sv",
    "maxDataCells": 10000,
    "maxCallsPerTimeWindow": 30,
    "timeWindow": 10,
    "sourceReferences": [
        {
            "language": "sv",
            "text": "KÃ¤lla: SCB"
        },
        {
            "language": "en",
            "text": "Source: Statistics Sweden"
        }
    ],
    "license": "https://creativecommons.org/share-your-work/public-domain/cc0/",
    "features": [
        {
            "id": "CORS",
            "params": [
                {
                    "key": "enabled",
                    "value": "True"
                }
            ]
        }
    ]
}
```
- *apiVersion* states the version of the API
- *languages* list the languages that can be used to when querying the API. Almost every endpoint support a lang query string parameter that can be set to the `id` of the language e.g. `lang=en` for english
- *defaultLanguage* specifys which langue is used in the resonses if no language have been specified.
- *maxDataCells* specifys the maximum number of data cells that can be fetch by one request.
- *maxCallsPerTimeWindow* specifys how many requests that can be done during a time window specified by *timeWindow*
- *timeWindow* the time duration in seconds that makes up the time window used the the thotteling protection. 
- *sourceReferences* specifies how one could cite the data fetch from through API.
- *license* specifys the license of the data.

## Navigation endpoints 

Browse the database structure.

### Returns the database root folder.
```
HTTP GET https://my-site.com/api/v2/navigation
```
#### Parameters
##### lang
An optional language parameter.
#### Example response
```json
{
  "language": "en",
  "objectType": "folder",
  "id": null,
  "label": null,
  "description": null,
  "folderContents": [
    {
      "objectType": "folder-information",
      "id": "AM",
      "label": "Labour market",
      "description": "",
      "links": [
        {
          "rel": "self",
          "hreflang": "sv",
          "href": "https://my-site.com/api/v2/navigation/AM"
        },
        {
          "rel": "self",
          "hreflang": "en",
          "href": "https://my-site.com/api/v2/navigation/AM?lang=en"
        }
      ]
    },
    {
      "objectType": "folder-information",
      "id": "BE",
      "label": "Population",
      "description": "",
      "links": [
        {
          "rel": "self",
          "hreflang": "sv",
          "href": "https://my-site.com/api/v2/navigation/BE"
        },
        {
          "rel": "self",
          "hreflang": "en",
          "href": "https://my-site.com/api/v2/navigation/BE?lang=en"
        }
      ]
    }
  ],
  "links": [
    {
      "rel": "self",
      "hreflang": "sv",
      "href": "https://my-site.com/api/v2/navigation"
    },
    {
      "rel": "self",
      "hreflang": "en",
      "href": "https://my-site.com/api/v2/navigation?lang=en"
    }
  ]
}
```
### Return the content of a specific folder in the database
```
HTTP GET http://my-site.com/api/v2/navigation/{id}
```

Returns the database folder identified by *id*.

#### Parameters
##### lang
An optional language parameter.

#### Example response
The following example shows the response of the API request `http://my-site.com/api/v2/navigation/BE0101A`. Metadata about the folder BE0101A is returned together with the folder contents of the BE0101A folder

```json
{
  "language": "en",
  "objectType": "folder",
  "id": "BE0101A",
  "label": "Number of inhabitants",
  "description": "",
  "folderContents": [
    {
      "objectType": "table",
      "id": "TAB5444",
      "label": "Population per month by region, age and sex. Year 2000M01 - 2022M11",
      "description": "",
      "tags": [
        "population",
        "inhabitants"
      ],
      "updated": "2022-01-08T07:00:00.000Z",
      "firstPeriod": "2000M1",
      "lastPeriod": "2022M11",
      "category": "public",
      "variableNames": [
        "region",
        "age",
        "sex",
        "age",
        "month"
      ],
      "discontinued": false,
      "links": [
        {
          "rel": "self",
          "hreflang": "sv",
          "href": "https://my-site.com/api/v2/tables/TAB5444"
        },
        {
          "rel": "self",
          "hreflang": "en",
          "href": "https://my-site.com/api/v2/tables/TAB5444?lang=en"
        },
        {
          "rel": "metadata",
          "hreflang": "en",
          "href": "https://my-site.com/api/v2/tables/TAB5444/metadata?lang=en"
        },
        {
          "rel": "data",
          "hreflang": "en",
          "href": "https://my-site.com/api/v2/tables/TAB5444/data?lang=en"
        }
      ]
    },
    {
      "objectType": "table",
      "id": "TAB638",
      "label": "Population by region, marital status, age, sex, observations and year 1968 - 2021",
      "description": "",
      "tags": [
        "population"
      ],
      "updated": "2022-01-08T07:00:00.000Z",
      "firstPeriod": "1968",
      "lastPeriod": "2021",
      "category": "public",
      "variableNames": [
        "region",
        "marital status",
        "age",
        "sex",
        "age",
        "observations",
        "year"
      ],
      "discontinued": false,
      "links": [
        {
          "rel": "self",
          "hreflang": "sv",
          "href": "https://my-site.com/api/v2/tables/TAB638"
        },
        {
          "rel": "self",
          "hreflang": "en",
          "href": "https://my-site.com/api/v2/tables/TAB638?lang=en"
        },
        {
          "rel": "metadata",
          "hreflang": "en",
          "href": "https://my-site.com/api/v2/tables/TAB638/metadata?lang=en"
        },
        {
          "rel": "data",
          "hreflang": "en",
          "href": "https://my-site.com/api/v2/tables/TAB638/data?lang=en"
        }
      ]
    },
    {
      "objectType": "table",
      "id": "TAB5890",
      "label": "Population by age and sex. Year 1860 - 2021",
      "description": "",
      "tags": [
        "population"
      ],
      "updated": "2022-01-08T07:00:00.000Z",
      "firstPeriod": "1860",
      "lastPeriod": "2021",
      "category": "public",
      "variableNames": [
        "age",
        "sex",
        "observations",
        "year"
      ],
      "discontinued": false,
      "links": [
        {
          "rel": "self",
          "hreflang": "sv",
          "href": "https://my-site.com/api/v2/tables/TAB5890"
        },
        {
          "rel": "self",
          "hreflang": "en",
          "href": "https://my-site.com/api/v2/tables/TAB5890?lang=en"
        },
        {
          "rel": "metadata",
          "hreflang": "en",
          "href": "https://my-site.com/api/v2/tables/TAB5890/metadata?lang=en"
        },
        {
          "rel": "data",
          "hreflang": "en",
          "href": "https://my-site.com/api/v2/tables/TAB5890/data?lang=en"
        }
      ]
    },
    {
      "objectType": "table",
      "id": "TAB4537",
      "label": "Population by district, Landscape or Part of the country by sex. Year 2015 - 2021",
      "description": "",
      "tags": [
        "population"
      ],
      "updated": "2022-01-08T07:00:00.000Z",
      "firstPeriod": "2015",
      "lastPeriod": "2021",
      "category": "public",
      "variableNames": [
        "region",
        "sex",
        "observations",
        "year"
      ],
      "discontinued": false,
      "links": [
        {
          "rel": "self",
          "hreflang": "sv",
          "href": "https://my-site.com/api/v2/tables/TAB4537"
        },
        {
          "rel": "self",
          "hreflang": "en",
          "href": "https://my-site.com/api/v2/tables/TAB4537?lang=en"
        },
        {
          "rel": "metadata",
          "hreflang": "en",
          "href": "https://my-site.com/api/v2/tables/TAB4537/metadata?lang=en"
        },
        {
          "rel": "data",
          "hreflang": "en",
          "href": "https://my-site.com/api/v2/tables/TAB4537/data?lang=en"
        }
      ]
    },
    {
      "objectType": "table",
      "id": "TAB1267",
      "label": "Population 1 November by region, age, sex, observations and year 2002 - 2022",
      "description": "",
      "tags": [
        "population"
      ],
      "updated": "2022-01-08T07:00:00.000Z",
      "firstPeriod": "2015",
      "lastPeriod": "2021",
      "category": "public",
      "variableNames": [
        "region",
        "age",
        "sex",
        "observations",
        "year"
      ],
      "discontinued": false,
      "links": [
        {
          "rel": "self",
          "hreflang": "sv",
          "href": "https://my-site.com/api/v2/tables/TAB1267"
        },
        {
          "rel": "self",
          "hreflang": "en",
          "href": "https://my-site.com/api/v2/tables/TAB1267?lang=en"
        },
        {
          "rel": "metadata",
          "hreflang": "en",
          "href": "https://my-site.com/api/v2/tables/TAB1267/metadata?lang=en"
        },
        {
          "rel": "data",
          "hreflang": "en",
          "href": "https://my-site.com/api/v2/tables/TAB1267/data?lang=en"
        }
      ]
    }
  ],
  "links": [
    {
      "rel": "self",
      "hreflang": "sv",
      "href": "https://my-site.com/api/v2/navigation/BE0101A"
    },
    {
      "rel": "self",
      "hreflang": "en",
      "href": "https://my-site.com/api/v2/navigation/BE0101A?lang=en"
    }
  ]
}
```
**Response described**

The Navigation endpoint returns two objects:
1. A *Folder* object containing metadata about the folder asked for
2. An array *folderContents* containing the contents of the folder (subfolders and statistical tables)

There are three possible values for *objectType*:

1. *Folder* - The folder asked for in the API request.

2. *FolderInformation* - A subfolder to the *Folder* object.

3. *Table* - A statistical table located in the folder.

**Folder metadata**

*id* - Folder id

*objectType* - Can have one of two possible values:
- *Folder* (the folder asked for in the API request)
- *FolderInformation* (subfolder)
- *Heading* A heading for separationg the content

*label* - Folder text

*description* - Folder description

*tags* - Folder tags (not implemented yet)

*links* - How to navigate to the folder

**Table metadata**

*id* - Table id

*objectType* - Will have the value "Table"

*label* - Table text

*description* - Table description

*updated* - When the table was last updated

*category* - Presentation category for the table. Possible values are:
- internal
- official
- private
- section

*firstPeriod* - The first data time period in the table

*lastPeriod* - The last data time period in the table

*discontinued* - If the table will be updated with new data or not

*tags* - Table tags (not implemented yet)

*links* - How to navigate to the table. For tables there are three links:

- self - How to navigate to the table
- metadata - How to navigate to the table metadata
- data - How to navigate to the table data


## Tables endpoints
### List all tables
List all tables in the database. The list can be filter by diffrent parameters.
```
HTTP GET http://my-site.com/api/v2/api/v2/tables/
```
#### Parameters
You can restrict the tables return by the following parameters
##### lang
An optional language parameter.
##### query
Selects only tables that that matches a criteria which is specified by the search parameter.
```
http://my-site.com/api/v2/tables?query=befolkning
```
##### pastDays
Selects only tables that was updated from the time of execution going back number of days stated by the parameter pastDays. Valid values for past days are integers between 1 and ? (Will return error?)
```
http://my-site.com/api/v2/tables?pastDays=5
```
##### includeDiscontinued
A true or false if discontinued tables should be included. Tables that do not have an explicit set the discontinued property will be treated as they are not discontinued.

##### pageSize
How many tables that should be in the response.
##### pageNumber
A number that specifies which page of the response to display. Default value is 1.

#### Example response
An exampel filtering on population with a page size of 3
```json
{
    "language": "en",
    "tables": [
        {
            "objectType": "table",
            "id": "TAB5444",
            "label": "Population per month by region, age and sex. Year 2000M01 - 2022M11",
            "description": "",
            "tags": [
              "population",
              "inhabitants"
            ],
            "updated": "2022-01-08T07:00:00.000Z",
            "firstPeriod": "2000M1",
            "lastPeriod": "2022M11",
            "category": "public",
            "variableNames": [
              "region",
              "age",
              "sex",
              "age",
              "month"
            ],
            "discontinued": false,
            "links": [
              {
                "rel": "self",
                "hreflang": "sv",
                "href": "https://my-site.com/api/v2/tables/TAB5444"
              },
              {
                "rel": "self",
                "hreflang": "en",
                "href": "https://my-site.com/api/v2/tables/TAB5444?lang=en"
              },
              {
                "rel": "metadata",
                "hreflang": "en",
                "href": "https://my-site.com/api/v2/tables/TAB5444/metadata?lang=en"
              },
              {
                "rel": "data",
                "hreflang": "en",
                "href": "https://my-site.com/api/v2/tables/TAB5444/data?lang=en"
              }
            ]
          },
          {
            "objectType": "table",
            "id": "TAB638",
            "label": "Population by region, marital status, age, sex, observations and year 1968 - 2021",
            "description": "",
            "tags": [
              "population"
            ],
            "updated": "2022-01-08T07:00:00.000Z",
            "firstPeriod": "1968",
            "lastPeriod": "2021",
            "category": "public",
            "variableNames": [
              "region",
              "marital status",
              "age",
              "sex",
              "age",
              "observations",
              "year"
            ],
            "discontinued": false,
            "links": [
              {
                "rel": "self",
                "hreflang": "sv",
                "href": "https://my-site.com/api/v2/tables/TAB638"
              },
              {
                "rel": "self",
                "hreflang": "en",
                "href": "https://my-site.com/api/v2/tables/TAB638?lang=en"
              },
              {
                "rel": "metadata",
                "hreflang": "en",
                "href": "https://my-site.com/api/v2/tables/TAB638/metadata?lang=en"
              },
              {
                "rel": "data",
                "hreflang": "en",
                "href": "https://my-site.com/api/v2/tables/TAB638/data?lang=en"
              }
            ]
          },
          {
            "objectType": "table",
            "id": "TAB5890",
            "label": "Population by age and sex. Year 1860 - 2021",
            "description": "",
            "tags": [
              "population"
            ],
            "updated": "2022-01-08T07:00:00.000Z",
            "firstPeriod": "1860",
            "lastPeriod": "2021",
            "category": "public",
            "variableNames": [
              "age",
              "sex",
              "observations",
              "year"
            ],
            "discontinued": false,
            "links": [
              {
                "rel": "self",
                "hreflang": "sv",
                "href": "https://my-site.com/api/v2/tables/TAB5890"
              },
              {
                "rel": "self",
                "hreflang": "en",
                "href": "https://my-site.com/api/v2/tables/TAB5890?lang=en"
              },
              {
                "rel": "metadata",
                "hreflang": "en",
                "href": "https://my-site.com/api/v2/tables/TAB5890/metadata?lang=en"
              },
              {
                "rel": "data",
                "hreflang": "en",
                "href": "https://my-site.com/api/v2/tables/TAB5890/data?lang=en"
              }
            ]
          }
    ],
    "page": {
        "pageNumber": 1,
        "pageSize": 3,
        "totalElements": 56,
        "totalPages": 19,
        "links": [
            {
                "rel": "next",
                "hreflang": "en",
                "href": "https://my-site.com/api/v2/tables/?lang=en&query=population&pagesize=3,pageNumber=2"
            },
            {
                "rel": "last",
                "hreflang": "en",
                "href": "https://my-site.com/api/v2/tables/?lang=en&query=population&pagesize=3,pageNumber=19"
            }

        ]
    },
    "links": [
        {
            "rel": "self",
            "hreflang": "en",
            "href": "https://my-site.com/api/v2/tables/?lang=en&query=population&pagesize=3"
        }
    ]
}
```
**Response described**

*Tables* a list of table objects containing basic metadata for a table.
*Page* paging information about the results 
* *pageNumber* the page number that was returned.
* *pageSize* the pageSize of the response.
* *totalElements* the total number of tables
* *totalPages* the total number of pages.
* *links* links with relation next, previous and last when relevant. That describes the links to next, previous and last page in the result set.

**Note**
The information is cache for performance and there can be a lag in the response directly after release of new data. 

### List basic information for a table
```
HTTP GET http://my-site.com/api/v2/tables/<table-id>
```
#### Parameters
##### lang
An optional language parameter.
#### Example response
An example that returns the basic information for table TAB638
```json
{
    "language": "en",
    "objectType": "table",
    "id": "TAB638",
    "label": "Population by region, marital status, age, sex, observations and year 1968 - 2021",
    "description": "",
    "tags": [
      "population"
    ],
    "updated": "2022-01-08T07:00:00.000Z",
    "firstPeriod": "1968",
    "lastPeriod": "2021",
    "category": "public",
    "variableNames": [
      "region",
      "marital status",
      "age",
      "sex",
      "age",
      "observations",
      "year"
    ],
    "discontinued": false,
    "links": [
      {
        "rel": "self",
        "hreflang": "sv",
        "href": "https://my-site.com/api/v2/tables/TAB638"
      },
      {
        "rel": "self",
        "hreflang": "en",
        "href": "https://my-site.com/api/v2/tables/TAB638?lang=en"
      },
      {
        "rel": "metadata",
        "hreflang": "en",
        "href": "https://my-site.com/api/v2/tables/TAB638/metadata?lang=en"
      },
      {
        "rel": "data",
        "hreflang": "en",
        "href": "https://my-site.com/api/v2/tables/TAB638/data?lang=en"
      }
    ]
  }
```
**Note**
The information may be cached for performance and there can be a short delay in the response directly after release of new data. 
### List metadata for a table
List metadata for the specified table
```
HTTP GET http://my-site.com/api/v2/tables/<table-id>/metadata
```
#### Parameters
##### lang
An optional language parameter.
##### ouputFormat
One of json-px or json-stat2. The default is given by the configuration endpoint.
#### Example response
```json
{
    "id": "TAB638",
    "language": "sv",
    "label": "FolkmÃ¤ngden efter region, civilstÃ¥nd, Ã¥lder och kÃ¶n. Ãr 1968 - 2021",
    "description": "",
    "aggregationAllowed": true,
    "officialStatistics": true,
    "subjectCode": "BE",
    "subjectLabel": "Befolkning",
    "source": "SCB",
    "licence": "CC0-1.0",
    "tags" : [""],
    "updated": "2022-01-08T07:00:00.000Z",
    "discontinued": false,
    "variables": [
        {
            "id": "Region",
            "label": "region",
            "type": "GeographicalVariable",
            "eliminination": true,
            "eliminationValueCode": "00",
            "values": [
                { "code": "00", "label": "Riket"},
                { "code": "01", "label": "Stockholms lÃ¤n"},
                { "code": "0114", "label": "Upplands VÃ¤sby"},
                { "code": "0115", "label": "Vallentuna"},
                { "code": "0117", "label": "ÃsterÃ¥ker"},
                { "code": "0120", "label": "VÃ¤rmdÃ¶"},
                { "code": "0123", "label": "JÃ¤rfÃ¤lla"},
                { "code": "0125", "label": "EkerÃ¶"},
                { "code": "0126", "label": "Huddinge"},
                { "code": "0127", "label": "Botkyrka"},
                { "code": "0128", "label": "Salem"},
                { "code": "0136", "label": "Haninge"},
                { "code": "0138", "label": "TyresÃ¶"},
                { "code": "0139", "label": "Upplands-Bro"},
                { "code": "0140", "label": "Nykvarn", "notes": [{"madantory": true, "text": "Ny regional indelning fr.o.m. 1999-01-01. Delar av SÃ¶dertÃ¤lje kommun (kod 0181) bildar en ny kommun benÃ¤mnd Nykvarn (kod 0140)."}] },
                { "code": "0160", "label": "TÃ¤by"},
                { "code": "0162", "label": "Danderyd"},
                { "code": "0163", "label": "Sollentuna"},
                { "code": "0180", "label": "Stockholm"},
                { "code": "0181", "label": "SÃ¶dertÃ¤lje", "notes": [{"madantory": true, "text": "Ny regional indelning fr.o.m. 1999-01-01. Delar av SÃ¶dertÃ¤lje kommun (kod 0181) bildar en ny kommun benÃ¤mnd Nykvarn (kod 0140)."}] },
                { "code": "0182", "label": "Nacka"},
                { "code": "0183", "label": "Sundbyberg"},
                { "code": "0184", "label": "Solna"},
                { "code": "0186", "label": "LidingÃ¶", "notes": [{"madantory": true, "text": "FrÃ¥n och med 2011-01-01 tillhÃ¶r Storholmen LidingÃ¶ (0186) som tidigare tillhÃ¶rde Vaxholm (0187)."}] },
                { "code": "0187", "label": "Vaxholm", "notes": [{"madantory": true, "text": "FrÃ¥n och med 2011-01-01 tillhÃ¶r Storholmen LidingÃ¶ (0186) som tidigare tillhÃ¶rde Vaxholm (0187)."}] },
                { "code": "0188", "label": "NorrtÃ¤lje"},
                { "code": "0191", "label": "Sigtuna"},
                { "code": "0192", "label": "NynÃ¤shamn"},
                { "code": "03", "label": "Uppsala lÃ¤n"},
                { "code": "0305", "label": "HÃ¥bo"},
                { "code": "0319", "label": "Ãlvkarleby"},
                { "code": "0330", "label": "Knivsta", "notes": [{"madantory": true, "text": "Ny regional indelning fr.o.m. 2003-01-01. Delar av Uppsala kommun bildar en ny kommun benÃ¤mnd Knivsta kommun."}] },
                { "code": "0331", "label": "Heby"},
                { "code": "0360", "label": "Tierp"},
                { "code": "0380", "label": "Uppsala", "notes": [{"madantory": true, "text": "Ny regional indelning fr.o.m. 2003-01-01. Delar av Uppsala kommun bildar en ny kommun benÃ¤mnd Knivsta kommun."}] },
                { "code": "0381", "label": "EnkÃ¶ping"},
                { "code": "0382", "label": "Ãsthammar"},
                { "code": "04", "label": "SÃ¶dermanlands lÃ¤n"},
                { "code": "0428", "label": "VingÃ¥ker"},
                { "code": "0461", "label": "Gnesta"},
                { "code": "0480", "label": "NykÃ¶ping"},
                { "code": "0481", "label": "OxelÃ¶sund"},
                { "code": "0482", "label": "Flen"},
                { "code": "0483", "label": "Katrineholm"},
                { "code": "0484", "label": "Eskilstuna"},
                { "code": "0486", "label": "StrÃ¤ngnÃ¤s"},
                { "code": "0488", "label": "Trosa"},
                { "code": "05", "label": "ÃstergÃ¶tlands lÃ¤n"},
                { "code": "0509", "label": "ÃdeshÃ¶g"},
                { "code": "0512", "label": "Ydre"},
                { "code": "0513", "label": "Kinda"},
                { "code": "0560", "label": "Boxholm"},
                { "code": "0561", "label": "Ãtvidaberg"},
                { "code": "0562", "label": "FinspÃ¥ng"},
                { "code": "0563", "label": "Valdemarsvik"},
                { "code": "0580", "label": "LinkÃ¶ping"},
                { "code": "0581", "label": "NorrkÃ¶ping"},
                { "code": "0582", "label": "SÃ¶derkÃ¶ping"},
                { "code": "0583", "label": "Motala"},
                { "code": "0584", "label": "Vadstena"},
                { "code": "0586", "label": "MjÃ¶lby"},
                { "code": "06", "label": "JÃ¶nkÃ¶pings lÃ¤n"},
                { "code": "0604", "label": "Aneby"},
                { "code": "0617", "label": "GnosjÃ¶"},
                { "code": "0642", "label": "MullsjÃ¶"},
                { "code": "0643", "label": "Habo"},
                { "code": "0662", "label": "Gislaved"},
                { "code": "0665", "label": "Vaggeryd"},
                { "code": "0680", "label": "JÃ¶nkÃ¶ping"},
                { "code": "0682", "label": "NÃ¤ssjÃ¶"},
                { "code": "0683", "label": "VÃ¤rnamo"},
                { "code": "0684", "label": "SÃ¤vsjÃ¶"},
                { "code": "0685", "label": "Vetlanda"},
                { "code": "0686", "label": "EksjÃ¶"},
                { "code": "0687", "label": "TranÃ¥s"},
                { "code": "07", "label": "Kronobergs lÃ¤n"},
                { "code": "0760", "label": "Uppvidinge"},
                { "code": "0761", "label": "Lessebo"},
                { "code": "0763", "label": "Tingsryd"},
                { "code": "0764", "label": "Alvesta"},
                { "code": "0765", "label": "Ãlmhult"},
                { "code": "0767", "label": "Markaryd"},
                { "code": "0780", "label": "VÃ¤xjÃ¶"},
                { "code": "0781", "label": "Ljungby"},
                { "code": "08", "label": "Kalmar lÃ¤n"},
                { "code": "0821", "label": "HÃ¶gsby"},
                { "code": "0834", "label": "TorsÃ¥s"},
                { "code": "0840", "label": "MÃ¶rbylÃ¥nga"},
                { "code": "0860", "label": "Hultsfred"},
                { "code": "0861", "label": "MÃ¶nsterÃ¥s"},
                { "code": "0862", "label": "Emmaboda"},
                { "code": "0880", "label": "Kalmar"},
                { "code": "0881", "label": "Nybro"},
                { "code": "0882", "label": "Oskarshamn"},
                { "code": "0883", "label": "VÃ¤stervik"},
                { "code": "0884", "label": "Vimmerby"},
                { "code": "0885", "label": "Borgholm"},
                { "code": "09", "label": "Gotlands lÃ¤n"},
                { "code": "0980", "label": "Gotland"},
                { "code": "10", "label": "Blekinge lÃ¤n"},
                { "code": "1060", "label": "OlofstrÃ¶m"},
                { "code": "1080", "label": "Karlskrona"},
                { "code": "1081", "label": "Ronneby"},
                { "code": "1082", "label": "Karlshamn"},
                { "code": "1083", "label": "SÃ¶lvesborg"},
                { "code": "12", "label": "SkÃ¥ne lÃ¤n"},
                { "code": "1214", "label": "SvalÃ¶v"},
                { "code": "1230", "label": "Staffanstorp"},
                { "code": "1231", "label": "BurlÃ¶v"},
                { "code": "1233", "label": "Vellinge"},
                { "code": "1256", "label": "Ãstra GÃ¶inge"},
                { "code": "1257", "label": "Ãrkelljunga"},
                { "code": "1260", "label": "Bjuv"},
                { "code": "1261", "label": "KÃ¤vlinge"},
                { "code": "1262", "label": "Lomma"},
                { "code": "1263", "label": "Svedala"},
                { "code": "1264", "label": "Skurup"},
                { "code": "1265", "label": "SjÃ¶bo"},
                { "code": "1266", "label": "HÃ¶rby"},
                { "code": "1267", "label": "HÃ¶Ã¶r"},
                { "code": "1270", "label": "Tomelilla"},
                { "code": "1272", "label": "BromÃ¶lla"},
                { "code": "1273", "label": "Osby"},
                { "code": "1275", "label": "Perstorp"},
                { "code": "1276", "label": "Klippan"},
                { "code": "1277", "label": "Ãstorp"},
                { "code": "1278", "label": "BÃ¥stad"},
                { "code": "1280", "label": "MalmÃ¶"},
                { "code": "1281", "label": "Lund"},
                { "code": "1282", "label": "Landskrona"},
                { "code": "1283", "label": "Helsingborg"},
                { "code": "1284", "label": "HÃ¶ganÃ¤s"},
                { "code": "1285", "label": "EslÃ¶v"},
                { "code": "1286", "label": "Ystad"},
                { "code": "1287", "label": "Trelleborg"},
                { "code": "1290", "label": "Kristianstad"},
                { "code": "1291", "label": "Simrishamn"},
                { "code": "1292", "label": "Ãngelholm"},
                { "code": "1293", "label": "HÃ¤ssleholm"},
                { "code": "13", "label": "Hallands lÃ¤n"},
                { "code": "1315", "label": "Hylte"},
                { "code": "1380", "label": "Halmstad"},
                { "code": "1381", "label": "Laholm"},
                { "code": "1382", "label": "Falkenberg"},
                { "code": "1383", "label": "Varberg"},
                { "code": "1384", "label": "Kungsbacka"},
                { "code": "14", "label": "VÃ¤stra GÃ¶talands lÃ¤n"},
                { "code": "1401", "label": "HÃ¤rryda"},
                { "code": "1402", "label": "Partille"},
                { "code": "1407", "label": "ÃckerÃ¶"},
                { "code": "1415", "label": "Stenungsund"},
                { "code": "1419", "label": "TjÃ¶rn"},
                { "code": "1421", "label": "Orust"},
                { "code": "1427", "label": "SotenÃ¤s"},
                { "code": "1430", "label": "Munkedal"},
                { "code": "1435", "label": "Tanum"},
                { "code": "1438", "label": "Dals-Ed"},
                { "code": "1439", "label": "FÃ¤rgelanda"},
                { "code": "1440", "label": "Ale"},
                { "code": "1441", "label": "Lerum"},
                { "code": "1442", "label": "VÃ¥rgÃ¥rda"},
                { "code": "1443", "label": "Bollebygd"},
                { "code": "1444", "label": "GrÃ¤storp"},
                { "code": "1445", "label": "Essunga"},
                { "code": "1446", "label": "Karlsborg"},
                { "code": "1447", "label": "GullspÃ¥ng"},
                { "code": "1452", "label": "Tranemo"},
                { "code": "1460", "label": "Bengtsfors"},
                { "code": "1461", "label": "Mellerud"},
                { "code": "1462", "label": "Lilla Edet"},
                { "code": "1463", "label": "Mark"},
                { "code": "1465", "label": "Svenljunga"},
                { "code": "1466", "label": "Herrljunga"},
                { "code": "1470", "label": "Vara"},
                { "code": "1471", "label": "GÃ¶tene"},
                { "code": "1472", "label": "Tibro"},
                { "code": "1473", "label": "TÃ¶reboda"},
                { "code": "1480", "label": "GÃ¶teborg"},
                { "code": "1481", "label": "MÃ¶lndal"},
                { "code": "1482", "label": "KungÃ¤lv"},
                { "code": "1484", "label": "Lysekil"},
                { "code": "1485", "label": "Uddevalla"},
                { "code": "1486", "label": "StrÃ¶mstad"},
                { "code": "1487", "label": "VÃ¤nersborg"},
                { "code": "1488", "label": "TrollhÃ¤ttan"},
                { "code": "1489", "label": "AlingsÃ¥s"},
                { "code": "1490", "label": "BorÃ¥s"},
                { "code": "1491", "label": "Ulricehamn"},
                { "code": "1492", "label": "ÃmÃ¥l"},
                { "code": "1493", "label": "Mariestad"},
                { "code": "1494", "label": "LidkÃ¶ping"},
                { "code": "1495", "label": "Skara"},
                { "code": "1496", "label": "SkÃ¶vde"},
                { "code": "1497", "label": "Hjo"},
                { "code": "1498", "label": "Tidaholm"},
                { "code": "1499", "label": "FalkÃ¶ping"},
                { "code": "17", "label": "VÃ¤rmlands lÃ¤n"},
                { "code": "1715", "label": "Kil"},
                { "code": "1730", "label": "Eda"},
                { "code": "1737", "label": "Torsby"},
                { "code": "1760", "label": "Storfors"},
                { "code": "1761", "label": "HammarÃ¶"},
                { "code": "1762", "label": "Munkfors"},
                { "code": "1763", "label": "Forshaga"},
                { "code": "1764", "label": "Grums"},
                { "code": "1765", "label": "ÃrjÃ¤ng"},
                { "code": "1766", "label": "Sunne"},
                { "code": "1780", "label": "Karlstad"},
                { "code": "1781", "label": "Kristinehamn"},
                { "code": "1782", "label": "Filipstad"},
                { "code": "1783", "label": "Hagfors"},
                { "code": "1784", "label": "Arvika"},
                { "code": "1785", "label": "SÃ¤ffle"},
                { "code": "18", "label": "Ãrebro lÃ¤n"},
                { "code": "1814", "label": "Lekeberg"},
                { "code": "1860", "label": "LaxÃ¥"},
                { "code": "1861", "label": "Hallsberg"},
                { "code": "1862", "label": "Degerfors"},
                { "code": "1863", "label": "HÃ¤llefors"},
                { "code": "1864", "label": "Ljusnarsberg"},
                { "code": "1880", "label": "Ãrebro"},
                { "code": "1881", "label": "Kumla"},
                { "code": "1882", "label": "Askersund"},
                { "code": "1883", "label": "Karlskoga"},
                { "code": "1884", "label": "Nora"},
                { "code": "1885", "label": "Lindesberg"},
                { "code": "19", "label": "VÃ¤stmanlands lÃ¤n"},
                { "code": "1904", "label": "Skinnskatteberg"},
                { "code": "1907", "label": "Surahammar"},
                { "code": "1960", "label": "KungsÃ¶r"},
                { "code": "1961", "label": "Hallstahammar"},
                { "code": "1962", "label": "Norberg"},
                { "code": "1980", "label": "VÃ¤sterÃ¥s"},
                { "code": "1981", "label": "Sala"},
                { "code": "1982", "label": "Fagersta"},
                { "code": "1983", "label": "KÃ¶ping"},
                { "code": "1984", "label": "Arboga"},
                { "code": "20", "label": "Dalarnas lÃ¤n"},
                { "code": "2021", "label": "Vansbro"},
                { "code": "2023", "label": "Malung-SÃ¤len"},
                { "code": "2026", "label": "Gagnef"},
                { "code": "2029", "label": "Leksand"},
                { "code": "2031", "label": "RÃ¤ttvik"},
                { "code": "2034", "label": "Orsa"},
                { "code": "2039", "label": "Ãlvdalen"},
                { "code": "2061", "label": "Smedjebacken"},
                { "code": "2062", "label": "Mora"},
                { "code": "2080", "label": "Falun"},
                { "code": "2081", "label": "BorlÃ¤nge"},
                { "code": "2082", "label": "SÃ¤ter"},
                { "code": "2083", "label": "Hedemora"},
                { "code": "2084", "label": "Avesta"},
                { "code": "2085", "label": "Ludvika"},
                { "code": "21", "label": "GÃ¤vleborgs lÃ¤n"},
                { "code": "2101", "label": "Ockelbo"},
                { "code": "2104", "label": "Hofors"},
                { "code": "2121", "label": "OvanÃ¥ker"},
                { "code": "2132", "label": "Nordanstig"},
                { "code": "2161", "label": "Ljusdal"},
                { "code": "2180", "label": "GÃ¤vle"},
                { "code": "2181", "label": "Sandviken"},
                { "code": "2182", "label": "SÃ¶derhamn"},
                { "code": "2183", "label": "BollnÃ¤s"},
                { "code": "2184", "label": "Hudiksvall"},
                { "code": "22", "label": "VÃ¤sternorrlands lÃ¤n"},
                { "code": "2260", "label": "Ãnge"},
                { "code": "2262", "label": "TimrÃ¥"},
                { "code": "2280", "label": "HÃ¤rnÃ¶sand"},
                { "code": "2281", "label": "Sundsvall"},
                { "code": "2282", "label": "Kramfors"},
                { "code": "2283", "label": "SollefteÃ¥"},
                { "code": "2284", "label": "ÃrnskÃ¶ldsvik"},
                { "code": "23", "label": "JÃ¤mtlands lÃ¤n"},
                { "code": "2303", "label": "Ragunda"},
                { "code": "2305", "label": "BrÃ¤cke"},
                { "code": "2309", "label": "Krokom"},
                { "code": "2313", "label": "StrÃ¶msund"},
                { "code": "2321", "label": "Ãre"},
                { "code": "2326", "label": "Berg"},
                { "code": "2361", "label": "HÃ¤rjedalen"},
                { "code": "2380", "label": "Ãstersund"},
                { "code": "24", "label": "VÃ¤sterbottens lÃ¤n"},
                { "code": "2401", "label": "Nordmaling"},
                { "code": "2403", "label": "Bjurholm"},
                { "code": "2404", "label": "Vindeln"},
                { "code": "2409", "label": "Robertsfors"},
                { "code": "2417", "label": "NorsjÃ¶"},
                { "code": "2418", "label": "MalÃ¥"},
                { "code": "2421", "label": "Storuman"},
                { "code": "2422", "label": "Sorsele"},
                { "code": "2425", "label": "Dorotea"},
                { "code": "2460", "label": "VÃ¤nnÃ¤s"},
                { "code": "2462", "label": "Vilhelmina"},
                { "code": "2463", "label": "Ãsele"},
                { "code": "2480", "label": "UmeÃ¥"},
                { "code": "2481", "label": "Lycksele"},
                { "code": "2482", "label": "SkellefteÃ¥"},
                { "code": "25", "label": "Norrbottens lÃ¤n"},
                { "code": "2505", "label": "Arvidsjaur"},
                { "code": "2506", "label": "Arjeplog"},
                { "code": "2510", "label": "Jokkmokk"},
                { "code": "2513", "label": "Ãverkalix"},
                { "code": "2514", "label": "Kalix"},
                { "code": "2518", "label": "ÃvertorneÃ¥"},
                { "code": "2521", "label": "Pajala"},
                { "code": "2523", "label": "GÃ¤llivare"},
                { "code": "2560", "label": "Ãlvsbyn"},
                { "code": "2580", "label": "LuleÃ¥"},
                { "code": "2581", "label": "PiteÃ¥"},
                { "code": "2582", "label": "Boden"},
                { "code": "2583", "label": "Haparanda"},
                { "code": "2584", "label": "Kiruna"}
            ],
            "codeLists": [
                {
                    "id": "vs_RegionKommun07",
                    "label": "Kommuner",
                    "type": "Valueset",
                    "links": [
                        {"rel": "metadata", "hreflang": "sv", "href": "https://my-site.com/api/v2/codelists/vs_RegionKommun07"}
                    ]
                },
                {
                    "id": "vs_RegionLÃ¤n07",
                    "label": "LÃ¤n",
                    "type": "Valueset",
                    "links": [
                        {"rel": "metadata", "hreflang": "sv", "href": "https://my-site.com/api/v2/codelists/vs_RegionLÃ¤n07"}
                    ]
                },
                {
                    "id": "vs_RegionRiket99",
                    "label": "Riket",
                    "type": "Valueset",
                    "links": [
                        {"rel": "metadata", "hreflang": "sv", "href": "https://my-site.com/api/v2/codelists/vs_RegionRiket99"}
                    ]
                },
                {
                    "id": "agg_RegionA-region_2",
                    "label": "A-regioner",
                    "type": "Aggregation",
                    "links": [
                        {"rel": "metadata", "hreflang": "sv", "href": "https://my-site.com/api/v2/codelists/agg_RegionA-region_2"}
                    ]
                },
                {
                    "id": "agg_RegionKommungrupp2005-_1",
                    "label": "Kommungrupper (SKL:s) 2005",
                    "type": "Aggregation",
                    "links": [
                        {"rel": "metadata", "hreflang": "sv", "href": "https://my-site.com/api/v2/codelists/agg_RegionKommungrupp2005-_1"}
                    ]
                },
                {
                    "id": "agg_RegionKommungrupp2011-",
                    "label": "Kommungrupper (SKL:s) 2011",
                    "type": "Aggregation",
                    "links": [
                        {"rel": "metadata", "hreflang": "sv", "href": "https://my-site.com/api/v2/codelists/agg_RegionKommungrupp2011-"}
                    ]
                },
                {
                    "id": "agg_RegionKommungrupp2017-",
                    "label": "Kommungrupper (SKL:s) 2017",
                    "type": "Aggregation",
                    "links": [
                        {"rel": "metadata", "hreflang": "sv", "href": "https://my-site.com/api/v2/codelists/agg_RegionKommungrupp2017-"}
                    ]
                },
                {
                    "id": "agg_RegionLA1998",
                    "label": "Lokalaarbetsmarknader 1998",
                    "type": "Aggregation",
                    "links": [
                        {"rel": "metadata", "hreflang": "sv", "href": "https://my-site.com/api/v2/codelists/agg_RegionLA1998"}
                    ]
                },
                {
                    "id": "agg_RegionLA2003_1",
                    "label": "Lokalaarbetsmarknader 2003",
                    "type": "Aggregation",
                    "links": [
                        {"rel": "metadata", "hreflang": "sv", "href": "https://my-site.com/api/v2/codelists/agg_RegionLA2003_1"}
                    ]
                },
                {
                    "id": "agg_RegionLA2008",
                    "label": "Lokalaarbetsmarknader 2008",
                    "type": "Aggregation",
                    "links": [
                        {"rel": "metadata", "hreflang": "sv", "href": "https://my-site.com/api/v2/codelists/agg_RegionLA2008"}
                    ]
                },
                {
                    "id": "agg_RegionLA2013",
                    "label": "Lokalaarbetsmarknader 2013",
                    "type": "Aggregation",
                    "links": [
                        {"rel": "metadata", "hreflang": "sv", "href": "https://my-site.com/api/v2/codelists/agg_RegionLA2013"}
                    ]
                },
                {
                    "id": "agg_RegionLA2018",
                    "label": "Lokalaarbetsmarknader 2018",
                    "type": "Aggregation",
                    "links": [
                        {"rel": "metadata", "hreflang": "sv", "href": "https://my-site.com/api/v2/codelists/agg_Ãlder5Ã¥r"}
                    ]
                },
                {
                    "id": "agg_RegionStoromr-04_2",
                    "label": "SorstadsomrÃ¥der -2004",
                    "type": "Aggregation",
                    "links": [
                        {"rel": "metadata", "hreflang": "sv", "href": "https://my-site.com/api/v2/codelists/agg_RegionStoromr-04_2"}
                    ]
                },
                {
                    "id": "agg_RegionStoromr05-_1",
                    "label": "SorstadsomrÃ¥der 2005-",
                    "type": "Aggregation",
                    "links": [
                        {"rel": "metadata", "hreflang": "sv", "href": "https://my-site.com/api/v2/codelists/agg_RegionStoromr05-_1"}
                    ]
                },
                {
                    "id": "agg_RegionNUTS1_2008",
                    "label": "NUTS1 fr.o.m 2008",
                    "type": "Aggregation",
                    "links": [
                        {"rel": "metadata", "hreflang": "sv", "href": "https://my-site.com/api/v2/codelists/agg_RegionNUTS1_2008"}
                    ]
                },
                {
                    "id": "agg_RegionNUTS2_2008",
                    "label": "NUTS2 fr.o.m 2008",
                    "type": "Aggregation",
                    "links": [
                        {"rel": "metadata", "hreflang": "sv", "href": "https://my-site.com/api/v2/codelists/agg_RegionNUTS2_2008"}
                    ]
                },
                {
                    "id": "agg_RegionNUTS3_2008",
                    "label": "NUTS3 fr.o.m 2008",
                    "type": "Aggregation",
                    "links": [
                        {"rel": "metadata", "hreflang": "sv", "href": "https://my-site.com/api/v2/codelists/agg_RegionNUTS3_2008"}
                    ]
                }

            ]
 
        },
        {
            "id": "Civilstand",
            "label": "civilstÃ¥nd",
            "type": "RegularVariable",
            "eliminination": true,
            "values": [
                {"code": "OG", "label": "ogifta" },
                {"code": "G", "label": "gifta" },
                {"code": "SK", "label": "skilda" },
                {"code": "ÃNKL", "label": "Ã¤nkor/Ã¤nklingar" }
            ]
        },
        {
            "id": "Alder",
            "label": "Ã¥lder",
            "type": "RegularVariable",
            "eliminination": true,
            "eliminationValueCode": "tot",
            "values": [
                {"code": "0", "label": "0 Ã¥r" },
                {"code": "1", "label": "1 Ã¥r" },
                {"code": "2", "label": "2 Ã¥r" },
                {"code": "3", "label": "3 Ã¥r" },
                {"code": "4", "label": "4 Ã¥r" },
                {"code": "5", "label": "5 Ã¥r" },
                {"code": "6", "label": "6 Ã¥r" },
                {"code": "7", "label": "7 Ã¥r" },
                {"code": "8", "label": "8 Ã¥r" },
                {"code": "9", "label": "9 Ã¥r" },
                {"code": "10", "label": "10 Ã¥r" },
                {"code": "11", "label": "11 Ã¥r" },
                {"code": "12", "label": "12 Ã¥r" },
                {"code": "13", "label": "13 Ã¥r" },
                {"code": "14", "label": "14 Ã¥r" },
                {"code": "15", "label": "15 Ã¥r" },
                {"code": "16", "label": "16 Ã¥r" },
                {"code": "17", "label": "17 Ã¥r" },
                {"code": "18", "label": "18 Ã¥r" },
                {"code": "19", "label": "19 Ã¥r" },
                {"code": "20", "label": "20 Ã¥r" },
                {"code": "21", "label": "21 Ã¥r" },
                {"code": "22", "label": "22 Ã¥r" },
                {"code": "23", "label": "23 Ã¥r" },
                {"code": "24", "label": "24 Ã¥r" },
                {"code": "25", "label": "25 Ã¥r" },
                {"code": "26", "label": "26 Ã¥r" },
                {"code": "27", "label": "27 Ã¥r" },
                {"code": "28", "label": "28 Ã¥r" },
                {"code": "29", "label": "29 Ã¥r" },
                {"code": "30", "label": "30 Ã¥r" },
                {"code": "31", "label": "31 Ã¥r" },
                {"code": "32", "label": "32 Ã¥r" },
                {"code": "33", "label": "33 Ã¥r" },
                {"code": "34", "label": "34 Ã¥r" },
                {"code": "35", "label": "35 Ã¥r" },
                {"code": "36", "label": "36 Ã¥r" },
                {"code": "37", "label": "37 Ã¥r" },
                {"code": "38", "label": "38 Ã¥r" },
                {"code": "39", "label": "39 Ã¥r" },
                {"code": "40", "label": "40 Ã¥r" },
                {"code": "41", "label": "41 Ã¥r" },
                {"code": "42", "label": "42 Ã¥r" },
                {"code": "43", "label": "43 Ã¥r" },
                {"code": "44", "label": "44 Ã¥r" },
                {"code": "45", "label": "45 Ã¥r" },
                {"code": "46", "label": "46 Ã¥r" },
                {"code": "47", "label": "47 Ã¥r" },
                {"code": "48", "label": "48 Ã¥r" },
                {"code": "49", "label": "49 Ã¥r" },
                {"code": "50", "label": "50 Ã¥r" },
                {"code": "51", "label": "51 Ã¥r" },
                {"code": "52", "label": "52 Ã¥r" },
                {"code": "53", "label": "53 Ã¥r" },
                {"code": "54", "label": "54 Ã¥r" },
                {"code": "55", "label": "55 Ã¥r" },
                {"code": "56", "label": "56 Ã¥r" },
                {"code": "57", "label": "57 Ã¥r" },
                {"code": "58", "label": "58 Ã¥r" },
                {"code": "59", "label": "59 Ã¥r" },
                {"code": "60", "label": "60 Ã¥r" },
                {"code": "61", "label": "61 Ã¥r" },
                {"code": "62", "label": "62 Ã¥r" },
                {"code": "63", "label": "63 Ã¥r" },
                {"code": "64", "label": "64 Ã¥r" },
                {"code": "65", "label": "65 Ã¥r" },
                {"code": "66", "label": "66 Ã¥r" },
                {"code": "67", "label": "67 Ã¥r" },
                {"code": "68", "label": "68 Ã¥r" },
                {"code": "69", "label": "69 Ã¥r" },
                {"code": "70", "label": "70 Ã¥r" },
                {"code": "71", "label": "71 Ã¥r" },
                {"code": "72", "label": "72 Ã¥r" },
                {"code": "73", "label": "73 Ã¥r" },
                {"code": "74", "label": "74 Ã¥r" },
                {"code": "75", "label": "75 Ã¥r" },
                {"code": "76", "label": "76 Ã¥r" },
                {"code": "77", "label": "77 Ã¥r" },
                {"code": "78", "label": "78 Ã¥r" },
                {"code": "79", "label": "79 Ã¥r" },
                {"code": "80", "label": "80 Ã¥r" },
                {"code": "81", "label": "81 Ã¥r" },
                {"code": "82", "label": "82 Ã¥r" },
                {"code": "83", "label": "83 Ã¥r" },
                {"code": "84", "label": "84 Ã¥r" },
                {"code": "85", "label": "85 Ã¥r" },
                {"code": "86", "label": "86 Ã¥r" },
                {"code": "87", "label": "87 Ã¥r" },
                {"code": "88", "label": "88 Ã¥r" },
                {"code": "89", "label": "89 Ã¥r" },
                {"code": "90", "label": "90 Ã¥r" },
                {"code": "91", "label": "91 Ã¥r" },
                {"code": "92", "label": "92 Ã¥r" },
                {"code": "93", "label": "93 Ã¥r" },
                {"code": "94", "label": "94 Ã¥r" },
                {"code": "95", "label": "95 Ã¥r" },
                {"code": "96", "label": "96 Ã¥r" },
                {"code": "97", "label": "97 Ã¥r" },
                {"code": "98", "label": "98 Ã¥r" },
                {"code": "99", "label": "99 Ã¥r" },
                {"code": "100+", "label": "100+ Ã¥r" },
                {"code": "tot", "label": "totalt Ã¥lder" }
            ],
            "codeLists": [
                {
                    "id": "vs_Ãlder1Ã¥rA",
                    "label": "Ãlder, 1 Ã¥rs-klasser",
                    "type": "Valueset",
                    "links": [
                        {"rel": "metadata", "hreflang": "sv", "href": "https://my-site.com/api/v2/codelists/vs_Ãlder1Ã¥rA"}
                    ]
                },
                {
                    "id": "vs_ÃlderTotA",
                    "label": "Ãlder, totalt, alla redovisade Ã¥ldrar",
                    "type": "Valueset",
                    "links": [
                        {"rel": "metadata", "hreflang": "sv", "href": "https://my-site.com/api/v2/codelists/vs_ÃlderTotA"}
                    ]
                },
                {
                    "id": "agg_Ãlder10Ã¥r",
                    "label": "10-Ã¥rsklasser",
                    "type": "Aggregation",
                    "links": [
                        {"rel": "metadata", "hreflang": "sv", "href": "https://my-site.com/api/v2/codelists/vs_Ãlder10Ã¥r"}
                    ]
                },
                {
                    "id": "agg_Ãlder5Ã¥r",
                    "label": "5-Ã¥rsklasser",
                    "type": "Aggregation",
                    "links": [
                        {"rel": "metadata", "hreflang": "sv", "href": "https://my-site.com/api/v2/codelists/vs_Ãlder5Ã¥r"}
                    ]
                }
            ]
        },
        {
            "id": "Kon",
            "label": "kÃ¶n",
            "type": "RegularVariable",
            "eliminination": true,
            "values":[
                {"code": "1", "label": "mÃ¤n" },
                {"code": "2", "label": "kvinnor" }
            ]
           
        },
        {
            "id": "ContentsCode",
            "label": "tabellinnehÃ¥ll",
            "type": "ContentsVariable",
            "values": [
                {"code": "BE0101N1", "label": "FolkmÃ¤ngd", "measuringAttribute": "Stock", "dayAdjusted": false, "seasonallyAdjusted": false, "unit": "antal", "refrencePeriod": "31 december repektive Ã¥r", "PreferedNumberOfDecimals": 0, "notes": [{"mandantory": true, "text": "Uppgifterna avser fÃ¶rhÃ¥llandena den 31 december fÃ¶r valt/valda Ã¥r enligt den regionala indelning som gÃ¤ller den 1 januari Ã¥ret efter."}] },
                {"code": "BE0101N2", "label": "FolkÃ¶kning", "measuringAttribute": "Flow", "dayAdjusted": false, "seasonallyAdjusted": false, "unit": "antal", "PreferedNumberOfDecimals": 0, "note": [{"mandantory": false, "text": "FolkÃ¶kningen definieras som skillnaden mellan folkmÃ¤ngden vid Ã¥rets bÃ¶rjan och Ã¥rets slut."}] }
            ]
        },
        {
            "id": "Tid",
            "label": "Ã¥r",
            "type": "TimeVariable",
            "timeUnit": "Annual",
            "firstPeriod": "1968",
            "lastPeriod": "2021",
            "values": [
                { "code": "1968", "label": "1968" },
                { "code": "1969", "label": "1969" },
                { "code": "1970", "label": "1970" },
                { "code": "1971", "label": "1971" },
                { "code": "1972", "label": "1972" },
                { "code": "1973", "label": "1973" },
                { "code": "1974", "label": "1974" },
                { "code": "1975", "label": "1975" },
                { "code": "1976", "label": "1976" },
                { "code": "1977", "label": "1977" },
                { "code": "1978", "label": "1978" },
                { "code": "1979", "label": "1979" },
                { "code": "1980", "label": "1980" },
                { "code": "1981", "label": "1981" },
                { "code": "1982", "label": "1982" },
                { "code": "1983", "label": "1983" },
                { "code": "1984", "label": "1984" },
                { "code": "1985", "label": "1985" },
                { "code": "1986", "label": "1986" },
                { "code": "1987", "label": "1987" },
                { "code": "1988", "label": "1988" },
                { "code": "1989", "label": "1989" },
                { "code": "1990", "label": "1990" },
                { "code": "1991", "label": "1991" },
                { "code": "1992", "label": "1992" },
                { "code": "1993", "label": "1993" },
                { "code": "1994", "label": "1994" },
                { "code": "1995", "label": "1995" },
                { "code": "1996", "label": "1996" },
                { "code": "1997", "label": "1997" },
                { "code": "1998", "label": "1998" },
                { "code": "1999", "label": "1999" },
                { "code": "2000", "label": "2000" },
                { "code": "2001", "label": "2001" },
                { "code": "2002", "label": "2002" },
                { "code": "2003", "label": "2003" },
                { "code": "2004", "label": "2004" },
                { "code": "2005", "label": "2005" },
                { "code": "2006", "label": "2006" },
                { "code": "2007", "label": "2007" },
                { "code": "2008", "label": "2008" },
                { "code": "2009", "label": "2009" },
                { "code": "2010", "label": "2010" },
                { "code": "2011", "label": "2011" },
                { "code": "2012", "label": "2012" },
                { "code": "2013", "label": "2013" },
                { "code": "2014", "label": "2014" },
                { "code": "2015", "label": "2015" },
                { "code": "2016", "label": "2016" },
                { "code": "2017", "label": "2017" },
                { "code": "2018", "label": "2018" },
                { "code": "2019", "label": "2019" },
                { "code": "2020", "label": "2020" },
                { "code": "2021", "label": "2021" }
            ]
        }
    ],
    "contacts": [
        {"name": "Tomas Johansson", "mail":"tomas.johansson@scb.se", "phone": "+46 010-479 64 26" },
        {"name": "(SCB) Statistikservice", "mail":"information@scb.se", "phone": "+46 010-479 50 00" }
    ],
    "notes": [
        {"text": "Fr o m 2007-01-01 Ã¶verfÃ¶rs Heby kommun frÃ¥n VÃ¤stmanlands lÃ¤n till Uppsala lÃ¤n. Hebys kommunkod Ã¤ndras frÃ¥n 1917 till 0331. ", "mandatory": true},
        {"text": "Registrerat partnerskap reglerade parfÃ¶rhÃ¥llanden mellan personer av samma kÃ¶n och fanns frÃ¥n 1995 till 2009. Registrerade partners rÃ¤knas som Gifta, Separerade partners som Skilda och Efterlevande partners som Ãnka/Ã¤nklingar.", "mandatory": true},
        {"text": "Fr o m 2007-01-01 utÃ¶kas Uppsala lÃ¤n med Heby kommun. Observera att lÃ¤nssiffrorna inte Ã¤r jÃ¤mfÃ¶rbara med lÃ¤nssiffrorna bakÃ¥t i tiden.", "mandatory": true,
        "conditions" : [
            {"variableCode": "ContentsCode", "valueCode": "BE0101N1"},
            {"variableCode": "Region", "valueCode": "03"}
        ]},
        {"text": "Fr o m 2007-01-01 minskar VÃ¤stmanlands lÃ¤n med Heby kommun. Observera att lÃ¤nssiffrorna inte Ã¤r jÃ¤mfÃ¶rbara med lÃ¤nssiffrorna bakÃ¥t i tiden.", "mandatory": true,
        "conditions" : [
            {"variableCode": "ContentsCode", "valueCode": "BE0101N1"},
            {"variableCode": "Region", "valueCode": "19"}
        ]}

    ],
    "links" : [
        {"rel": "self", "hreflang": "sv", "href": "https://my-site.com/api/v2/tables/TAB638/metadata"},
        {"rel": "self", "hreflang": "en", "href": "https://my-site.com/api/v2/tables/TAB638/metadata?lang=en"},
        {"rel": "data", "hreflang": "sv", "href": "https://my-site.com/api/v2/tables/TAB638/data"},
        {"rel": "data", "hreflang": "en", "href": "https://my-site.com/api/v2/tables/TAB638/data?lang=en"},
        {"rel": "describeby", "hreflang": "sv", "href": "https://my-other-site.com/sv/definitions/TAB638"},
        {"rel": "describeby", "hreflang": "en", "href": "https://my-other-site.com/en/definitions/TAB638"}
    ]
 
}
```
### Get data for a specific table
```
HTTP GET http://my-site.com/api/v2/tables/<table-id>/data/
```
#### Parameters
The variables of the table can be used to query a specific part of the table by using the parameters bellow. If the parameters is not given a default region of the table will be selected.
##### lang
An optional language parameter.
##### valueCodes
A selection specifying a region of the table that will be returned. All variables that cannÂ´t be eliminated must have a selection specified. The selection for a varibale is given in the form:
```
valueCodes[VARIABLE-CODE]=ITEM-SELECTION-1,ITEM-SELECTION-2,ITEM-SELECTION-3, etc
```
Whare `VARIABLE-CODE` is the code of the variable and `ITEM-SELECTION-X` is either a value code of a selection expression.
If the value code of a selection expression contains a comma is should be in brackets e.g. `[TOP(1,12)]` and if the value code is allready in brackets is should be in extra brackets e.g. `[ME01]` should be `[[ME01]]`.
##### codelist
You might what to use a diffrent codelist i.e. have a diffrent aggregate for a variable. I that case use can specify a codelist of one that is available for that variable. The items refered in `valueCodes` will then refeere to the values in the refered codelist. To codelist is specified in the form
```
codelist[VARIABLE-CODE]=CODELIST-ID
```
Whare `VARIABLE-CODE` is the code of the variable and `CODELIST-ID` is the ID of the codelist to use.
##### outputValues
Codelists can either be used to transform the returned variable or as a mean for selecting values. E.g. If a variable as values at municipality level and a codelist a county level. You might either use the codelist to aggregated the municiplaites to countys in the result or select all municipalities by specifying counties and have the municipalities that belongs the selected counties in the result.
The `outputValues` paramater can be used to specify how the codelist is used and is only applicable when a codelist have been secified for a variable.
It is given in the form
```
outputValues[VARIABLE-CODE]=aggregated|single
```
Whare `VARIABLE-CODE` is the code of the variable and the value could be either `aggregated` that is the values should be transformed to the codelist values or `single` the original values should be in the result. If no paramater is given `aggregated` will be used when specifying a codelist for a variable.
##### ouputFormat
Specifies the fomrat that the result should be in. The default is given by the configuration endpoint. See also the configuration endpind for available formats.

### Get data for a specific table
```
HTTP POST http://my-site.com/api/v2/tables/<table-id>/data/
```
This endpoint is similar to the GET but the selection expression is given in the body of the request as a JSON object.
#### Selection expression
The JSON object specifying the request is given in the form
```json
{
    "selection": [
        {
            "variableCode": "VARIABLE-CODE-1",
            "valueCodes": ["ITEM-SELECTION-1-1","ITEM-SELECTION-1-2"]
        },
        {
            "variableCode": "VARIABLE-CODE-1",
            "valueCodes": ["ITEM-SELECTION-2-1"],
            "codelList": "CODE-LIST-A",
            "outputValues": "single"
        }
    ]
}
```
#### Parameters
##### lang
An optional language parameter.
##### ouputFormat
Specifies the fomrat that the result should be in. The default is given by the configuration endpoint. See also the configuration endpind for available formats.

### Selection expression
Instead of specifying all valuecodes one could use a selection expression instead. Bellow follows the available expressions.
#### Wildcard expression 
A wildcard can be used to match all codes e.g. `*01` matches all codes that ends with `01`, `*2*` matches all codes that contains a `2`, `A*` matches all codes that starts with `A` and `*` matches all codes. Maximum of 2 waildcards can be given.

#### Exact match
A questionmark can be used to match exactly one character. E.g. `?` matches all codes that has exactly one character, `?1` matches codes that are 2 character long and ends with `1`.

#### TOP
The `TOP(N, Offset)` expression selects the `N` first values with an offset of `Offset`. E.g. `TOP(5)` will select the first 5 values or `TOP(5,3)` will select 3rd to 8th value. The `Offset` is by default `0` and must not be specified.

#### BOTTOM
`BOTTOM` is just as `TOP` but selects values from the bottom if the values list.

#### RANGE
`RANGE(X,Y)` selectes all values between value code `X` and value code `Y` including `X` and `Y`.

#### FROM
`FROM(X)` selectes all value codes from the value code that has `X` and bellow including `X`.

#### TO
TO(X) vÃ¤ljer alla vÃ¤rden frÃ¥n bÃ¶rjan till vÃ¤rdet med koden X inklusive vÃ¤rdet med koden X.

# Data selection parameters
Data queries to the API can limit the amount of data that is fetch by specifying a table query. The parameters to the table query are the Id:s for the variables. E.g. imaging the table A with the structure in the example above. We could specify  a table query as
```
CONTENTS=A&region=0114,0115&kon=1,2&Tid=2000
```
This table query will restrict the data that is fetched to the  regions *Upplands VÃ¤sby* and *Vallentuna* for the time period *2000*.
The values can be specified using different expressions they could be the 
-	Id of a value
-	The Nth rule see the Danish API 
-	wildcard expression that matches the text of a value 
-	or a combination of them all.
**Example**
```
YEAR=-(4),+(2),1999,*79,*3*,18* 
```
This will select 
-	the last 4 time periods
-	The first two time periods
-	The year 1999
-	All years ending with 79
-	All years containing the number 3
-	All years starting with 18

Question: Will this be possible for other variables than the time variable?
-	Yes. Will work for all variables
Proposal: Look in Lucene.Net for more ideas for selection syntax.
We want â?â as wildcard for one character. Shoudl be ok

Should be able to combine ? and *

~~The variable time can also prefix the code it >, >=, <, <= indicating a matching of all time values that are greater, greater or equal, less, less or equal to the value~~

**Example**
```
YEAR=>1980,<=1990 
```
This will select all years greater than 1980 but not greater than 1990.
Question: How will 1984M02 be handled?
We will try to make it work
-	2000M01
-	2000K2
-	2000H2
Filtered variables can have filters specified. In such cases when a filter is applied the values that are referred in the selection is the values of the filter
**Example**
```
Time=>1980.. From 
      1980..1990 Interval
      ..1980 To
Sortera alfabestiskt pÃ¥ kod och vÃ¤lj dÃ¤refter.
Man mÃ¥ste ange koderna precist (inga ? och *)
```

## Filters
There is two type of filters: selection and transformation. The selection filters are used to make the selection easier. Imagine you have a variable, *Country*, with values for all countries and that you also have a filter, *agg_continents*, that group all countries to continents. You would like to select all European countries but you do not want to select each individual country (and they can vary over time). What you will do is that you specify that the table query for Country should use the selection filter and that the values that are specified are the filter values. It could look something like this 
```
Country$agg_continents=EUROPE
```
Imagine the same variable as above but you actually do not want each individual European country instead you which to aggregate all data for Europe then you would have to apply a transformation filter like this
```
Country@agg_continents=EUROPE   
```
Question: Will this work also for valuesets?
-No orYes
Proposal: Look how Denmark has implemented this
They do not have aggregtions when streaming

```
Streams cannot have filters and therefor filters cannot be used in table queryâs for stream data.   
```

## Elimination
If elimination is set to true the variable can be eliminated and nothing have to be selected for this variable and the result will not contain that variable. If the variable have a value that states that it is the elimination value then that value will be selected to eliminate the variable. If no elimination value is specified the variable will be eliminated from the result by summing up all data points for the all values of that variable. If a variable has elimination set to false then at least one value bust be selected for that variable.



### Codelist endpoints
### List codelist for a table
Give information about a specific codelist
```
HTTP GET/api/v2/codelists/<codlist-id>
```
#### Parameters
##### lang
An optional language parameter.
#### Example response
An example response for codelist agg_RegionNUTS2_2008
```json
{
    "id": "agg_RegionNUTS2_2008",
    "label": "NUTS2 fr.o.m 2008",
    "language": "sv",
    "type": "Aggregation",
    "values": [
        {"code": "SE11", "value": "Stockholm", "valueMap": ["01"]},
        {"code": "SE12", "value": "Ãstra Mellansverige", "valueMap": ["03", "04", "05", "18", "19"]},
        {"code": "SE21", "value": "SmÃ¥land med Ã¶arna", "valueMap": ["06", "07", "08", "09"]},
        {"code": "SE22", "value": "Sydsverige", "valueMap": ["10", "12"]},
        {"code": "SE23", "value": "VÃ¤stsverige", "valueMap": ["13", "14"]},
        {"code": "SE31", "value": "Norra Mellansverige", "valueMap": ["17", "20", "21"]},
        {"code": "SE32", "value": "Mellersta Norrland", "valueMap": ["22", "23"]},
        {"code": "SE33", "value": "Ãvre Norrland", "valueMap": ["24", "25"]}
    ],
    "links": [
        {
            "rel": "self",
            "hreflang": "sv",
            "href": "https://my-site.com/api/v2/codelist/agg_RegionNUTS2_2008"
        }        
    ]
}
```




# Response codes
429
404
500

# Restrictions
Some restrictions in the 2.0 version of the API in comparison to the first version of the API.
-	**Only one database** â Drop the support of many databases that can be served by the same instance of the API. This will lower the complexity of the internals of the API since it does not have to take into account different configuration for different databases. Most organizations only have one database so the effect is limited only to a few inststances of the API. 
The recommended solution for organizations with multiple databases is to have multiple instances of the API with different configuration.
-	**New table identity** â The identifyer for a table is changed. In the case of a PX-file the MATRIX is used instead if the filename and in the case of CNMM the TableId instead of MainTable. The new id should be stable and not be reused. If a table change in such a way that it is no longer compatible it should be duplicated and assign an new id. This way the API will be able to identify the table even if it has been moved in the database.
-	**Names of aggregation files must be unique** â names of the aggregation files within a database must be unique since they will serve as the id of the aggregation filter.
-	VARIABLETYPE must be formalized.
-	Initially only support for PX, JSON-STAT, CSV,TSV, Excel and JSON-STAT2 (this should be possible to configure) 

## TODO  Remove section: Question:
Will http://my-site.com/api/v2/tables/TAB0001/data return default values or is it necessary to also specify variables and values to this URL to get data? 
-	Yes, if the number of resulting cells is lower than the max cell limit.
Same selection rules as in the current API.
Do not make it the whole url ony specify the nodeid like
http://my-site.com/api/v2/database/BE and http://my-site.com/api/v2/database/BE0401
and not http://my-site.com/api/v2/database/BE/BE0401.. OK (ge exempel pÃ¥ PX fil fallet)

Should not LINK and HEADLINE menu types be included? Suggestion is to skip the LINK type.

Suggested properties for all types
* Id
* Label
* Description

Suggested properties for table type
* LastUpdated
* Published
* TableCategory (PresCategory)

### Impelemntation guides
### PX-file database
Filter = Aggregation
Stream = N/A

### CNMM
Filter = ValueSet or Grouping
Stream = Subtable
